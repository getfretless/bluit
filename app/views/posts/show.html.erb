<article class="post">
  <%= render 'slug', post: @post %>

  <% if @post.text? -%>
    <section class="body"><%= @post.body %></section>
  <% end -%>

  <%= render 'actions', post: @post %>

  <% if user_signed_in? %>
    <%= render 'comments/form', comment: @comment %>
  <% end %>

  <ol id="comments">
    <% @post.comment_threads.each do |comment| -%>
      <li>
        <div class="tagline" title="<%= comment.created_at %>">
          <%= comment.user.username %>
          <%= time_ago_in_words comment.created_at %> ago
        </div>
        <section class="comment-body">
          <%= comment.body %>
        </section>

        <div id="reply-form-<%= comment.id %>" style="display: none">
        </div>

        <ul class="actions">
          <li><%= link_to 'reply', new_comment_path(parent_id: comment.id, format: 'js'), remote: true %></li>
        </ul>
      </li>
    <% end -%>
  </ol>
</article>
